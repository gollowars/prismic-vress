{"version":3,"sources":["webpack:///webpack/bootstrap 00fbf980c51a9e9db80d","webpack:///external \"prismic-javascript\"","webpack:///external \"fs-extra\"","webpack:///external \"path\"","webpack:///external \"clone\"","webpack:///external \"debug\"","webpack:///./src/index.js","webpack:///external \"js-yaml\"","webpack:///./src/Request.js","webpack:///./src/Util.js","webpack:///external \"axios\"","webpack:///external \"url\"","webpack:///./src/default.config.js"],"names":["debug","require","postParser","post","PrismicVress","constructor","config","generate","parser","Object","assign","endpoint","console","error","postCustomParser","assetPath","path","join","dist","assetsDirName","mediaPath","contentsPath","contentsDirName","cleandir","Util","cleanupDir","mkdir","posts","Request","getAll","query","newPostList","regExp","newPost","clone","mediaDownload","searchTreeList","deepObjectSearch","medialist","makeMedialist","overrideCopyPost","publishAssetsPath","url","downloadMedia","id","uid","iddir","type","filedir","filename","fileTypeIndex","link","layout","push","yamlStr","yaml","safeDump","dumpStr","outputdir","split","length","String","fs","writeFileSync","allPostJson","allPostFilePath","allPostsJsonName","JSON","stringify","process","on","dir","__init","Promise","resolve","reject","Prismic","api","then","response","results","err","makeKeyFromTree","map","obj","index","treekeyStr","place","forEach","key","removeSync","exist","pathExistsSync","mkdirsSync","object","searchKey","valRegExp","treeList","objectSearch","tree","keys","value","match","eval","publishPath","copy","dirs","newvalue","publishpath","res","axios","get","responseType","output","Buffer","data","e","__dirname"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 00fbf980c51a9e9db80d","module.exports = require(\"prismic-javascript\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"prismic-javascript\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"clone\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"clone\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"debug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debug\"\n// module id = 4\n// module chunks = 0","import Prismic from 'prismic-javascript'\nimport fs from 'fs-extra'\nimport yaml from 'js-yaml'\nimport path from 'path'\nimport clone from 'clone'\n\nimport Request from './Request'\nimport Util from './Util'\nimport { parse } from 'url';\nimport DefaultConfig from './default.config'\n\nconst debug = require('debug')('prismic-vress')\n\nfunction postParser(post) {\n  return post\n}\n\nclass PrismicVress {\n  constructor(){\n    this.config = null\n  }\n\n  async generate(config, parser = postParser) {\n\n    this.config = Object.assign(DefaultConfig, config)\n\n    if(!this.config.endpoint) {\n      throw console.error('must specify endpoint')\n    }\n    let postCustomParser = parser\n\n    // cleanup\n    const assetPath = path.join(this.config.dist, `/${this.config.assetsDirName}/`)\n    const mediaPath = path.join(assetPath, '/images/')\n\n    const contentsPath = path.join(this.config.dist, `/${this.config.contentsDirName}`)\n\n\n    if (this.config.cleandir) {\n      Util.cleanupDir(this.config.dist)\n    }\n\n    Util.mkdir(assetPath)\n    Util.mkdir(contentsPath)\n    let posts = await Request.getAll(this.config.endpoint,this.config.query)\n    let newPostList = []\n\n    for(const post of posts) {\n      let regExp = /([\\-_\\.\\!\\~\\*\\'\\(\\)a-z0-9\\;\\/\\?\\:@&=\\+\\$\\,\\%\\#]+(jpg|jpeg|gif|png|bmp))/\n      let newPost = clone(post)\n\n      // media download\n      if (this.config.mediaDownload) {\n        const searchTreeList = Util.deepObjectSearch(post, 'url', regExp)\n        const medialist = Util.makeMedialist(post, searchTreeList)\n        newPost = Util.overrideCopyPost(searchTreeList, post, `${config.publishAssetsPath}`)\n        Util.mkdir(mediaPath)\n        for (let url of medialist) {\n          await Util.downloadMedia(url, mediaPath)\n        }\n      }\n      const id = post.uid\n      const iddir = (id) ? `/${id}` : ''\n      const type = post.type\n      const filedir = `${contentsPath}/${post.type}`\n\n\n      const filename = (this.config.fileTypeIndex) ? `${filedir}${iddir}/index.md` : `${filedir}${iddir}.md`\n      const link = (this.config.fileTypeIndex) ? `/${post.type}${iddir}/` : `/${post.type}${iddir}.html`\n      newPost.link = link\n\n      if( type ) {\n        newPost.layout = type\n      }\n\n\n      newPost = postCustomParser(newPost)\n\n      newPostList.push(newPost)\n      const yamlStr = yaml.safeDump(newPost)\n      const dumpStr = `---\\n${yamlStr}---`\n      let outputdir = filename.split('/')\n      outputdir.length = outputdir.length - 1\n      Util.mkdir(String(outputdir.join('/')))\n      debug('write md:', filename)\n      fs.writeFileSync(filename, dumpStr)\n    }\n\n    const allPostJson = { posts: newPostList }\n    const allPostFilePath = path.join(assetPath, this.config.allPostsJsonName)\n    debug('write json:', allPostFilePath)\n    fs.writeFileSync(allPostFilePath, JSON.stringify(allPostJson))\n  }\n}\nprocess.on('unhandledRejection', console.dir);\n\nexport default new PrismicVress()\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"js-yaml\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-yaml\"\n// module id = 7\n// module chunks = 0","import Prismic from 'prismic-javascript'\n\nclass Request {\n  constructor() {\n\n\n    this.__init()\n  }\n\n  __init() {\n\n  }\n\n  getAll(endpoint,query = '') {\n    return new Promise((resolve, reject) => {\n      Prismic.api(endpoint).then(function (api) {\n        return api.query(query); // An empty query will return all the documents\n      }).then(function (response) {\n        // console.log(\"Documents: \", response.results);\n        resolve(response.results)\n      }, function (err) {\n        reject(err)\n        // console.log(\"Something went wrong: \", err);\n      });\n    })\n  }\n}\n\nexport default new Request()\n\n\n\n// WEBPACK FOOTER //\n// ./src/Request.js","import fs from 'fs-extra'\nimport clone from 'clone'\nimport axios from 'axios'\n\nconst debug = require('debug')('prismic-vress')\n\nfunction makeKeyFromTree(searchTreeList) {\n  return searchTreeList.map((obj, index) => {\n    let treekeyStr = ''\n    obj.place.split('/').forEach((key) => {\n      treekeyStr = treekeyStr + `['${key}']`\n    })\n    return treekeyStr\n  })\n}\n\n\nexport default class Util {\n  static async cleanupDir(dir) {\n    fs.removeSync(dir)\n    const exist = fs.pathExistsSync(dir)\n    if (!exist) {\n      fs.mkdirsSync(dir)\n    }\n  }\n\n  static async mkdir(dir) {\n    const exist = fs.pathExistsSync(dir)\n    if (!exist) {\n      fs.mkdirsSync(dir)\n    }\n  }\n\n  static deepObjectSearch(object, searchKey, valRegExp) {\n    let treeList = []\n\n    objectSearch(object,searchKey,treeList, '')\n    function objectSearch(object, searchKey, treeList, tree) {\n      Object.keys(object).forEach((key, index) => {\n        const value = object[key]\n        const place = String(tree + key)\n        if (typeof (value) === 'object') {\n          if (!value) return\n\n          objectSearch(value, searchKey, treeList, place + '/')\n        } else {\n          if (key === searchKey && value.match(valRegExp)) {\n            treeList.push({\n              place: place,\n              value: value\n            })\n          }\n        }\n      })\n      return treeList\n    }\n\n    return treeList\n  }\n\n  static makeMedialist(post, searchTreeList) {\n    return makeKeyFromTree(searchTreeList)\n    .map((key, index) => {\n      return eval(`post${key}`)\n    })\n  }\n\n  static overrideCopyPost(searchTreeList, object, publishPath) {\n    let copy = clone(object)\n    makeKeyFromTree(searchTreeList)\n    .forEach((key, index) => {\n      const value = eval(`object${key}`)\n      const dirs = value.split('/')\n      const filename = dirs[dirs.length - 1]\n      const newvalue = publishPath + filename\n      eval(`copy${key} = '${newvalue}'`)\n    })\n    return copy\n  }\n\n  static async downloadMedia(url, publishpath) {\n    return new Promise(async (resolve,reject)=>{\n      try {\n        debug('downloading...: ', url)\n        const res = await axios.get(url, {\n          responseType: 'arraybuffer'\n        })\n        const dirs = url.split('/')\n        const filename = dirs[dirs.length - 1]\n        const output = `${publishpath}/${filename}`\n        fs.writeFileSync(output, new Buffer(res.data), 'binary');\n        resolve()\n      } catch (e) {\n        debug('error url:',url)\n        reject(e)\n      }\n    })\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Util.js","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 11\n// module chunks = 0","import path from 'path'\n\nexport default {\n  dist: path.join(__dirname, 'dist'),\n  assetsDirName: `assets`,\n  contentsDirName: 'contents',\n  mediaDownload: true,\n  publishAssetsPath: '/assets/images/',\n  fileTypeIndex: true,\n  cleandir: false,\n  allPostsJsonName: 'all.json',\n  query: ''\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/default.config.js"],"sourceRoot":""}