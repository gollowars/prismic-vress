{"version":3,"sources":["webpack:///webpack/bootstrap 8e7d553852b579ec560d","webpack:///external \"prismic-javascript\"","webpack:///external \"fs-extra\"","webpack:///external \"clone\"","webpack:///external \"chalk\"","webpack:///./src/index.js","webpack:///external \"js-yaml\"","webpack:///external \"path\"","webpack:///./src/Request.js","webpack:///./src/Util.js","webpack:///external \"axios\"","webpack:///external \"debug\"","webpack:///external \"url\"","webpack:///./src/default.config.js"],"names":["chalk","require","postParser","post","PrismicVress","constructor","config","generate","parser","Object","assign","endpoint","console","error","postCustomParser","assetPath","path","join","dist","assetsDirName","mediaPath","contentsPath","contentsDirName","cleandir","Util","cleanupDir","mkdir","posts","Request","getAll","query","newPostList","regExp","newPost","clone","mediaDownload","searchTreeList","deepObjectSearch","medialist","makeMedialist","overrideCopyPost","publishAssetsPath","url","downloadMedia","id","uid","iddir","type","link","fileTypeIndex","push","forEach","index","layout","filedir","filename","yamlStr","yaml","safeDump","dumpStr","outputdir","split","length","String","log","blue","fs","writeFileSync","allPostJson","allPostFilePath","allPostsJsonName","JSON","stringify","__init","Promise","resolve","reject","Prismic","api","then","response","results","err","debug","makeKeyFromTree","map","obj","treekeyStr","place","key","dir","removeSync","exist","pathExistsSync","mkdirsSync","object","searchKey","valRegExp","treeList","objectSearch","tree","keys","value","match","eval","publishPath","copy","dirs","newvalue","publishpath","output","exitFlag","cyan","res","axios","get","responseType","Buffer","data","e","red","module","exports"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 8e7d553852b579ec560d","module.exports = require(\"prismic-javascript\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"prismic-javascript\"\n// module id = 0\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"clone\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"clone\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 3\n// module chunks = 0","import Prismic from 'prismic-javascript'\nimport fs from 'fs-extra'\nimport yaml from 'js-yaml'\nimport path from 'path'\nimport clone from 'clone'\n\nimport Request from './Request'\nimport Util from './Util'\nimport { parse } from 'url';\nimport DefaultConfig from './default.config'\n\nconst chalk = require('chalk')\n\nfunction postParser(post) {\n  return post\n}\n\nclass PrismicVress {\n  constructor(){\n    this.config = null\n  }\n\n  async generate(config, parser = postParser) {\n\n    this.config = Object.assign(DefaultConfig, config)\n\n    if(!this.config.endpoint) {\n      throw console.error('must specify endpoint')\n    }\n    let postCustomParser = parser\n\n    // cleanup\n    const assetPath = path.join(this.config.dist, `/${this.config.assetsDirName}/`)\n    const mediaPath = path.join(assetPath, '/images/')\n\n    const contentsPath = path.join(this.config.dist, `/${this.config.contentsDirName}`)\n\n\n    if (this.config.cleandir) {\n      Util.cleanupDir(this.config.dist)\n    }\n\n    Util.mkdir(assetPath)\n    Util.mkdir(contentsPath)\n    let posts = await Request.getAll(this.config.endpoint,this.config.query)\n    let newPostList = []\n\n    for(const post of posts) {\n      let regExp = /([\\-_\\.\\!\\~\\*\\'\\(\\)a-z0-9\\;\\/\\?\\:@&=\\+\\$\\,\\%\\#]+(jpg|jpeg|gif|png|bmp))/\n      let newPost = clone(post)\n\n      // media download\n      if (this.config.mediaDownload) {\n        const searchTreeList = Util.deepObjectSearch(post, 'url', regExp)\n        const medialist = Util.makeMedialist(post, searchTreeList)\n        newPost = Util.overrideCopyPost(searchTreeList, post, `${config.publishAssetsPath}`)\n        Util.mkdir(mediaPath)\n        for (let url of medialist) {\n          await Util.downloadMedia(url, mediaPath)\n        }\n      }\n\n      const id = post.uid\n      const iddir = (id) ? `/${id}` : ''\n      const type = post.type\n      const link = (this.config.fileTypeIndex) ? `/${type}${iddir}/` : `/${type}${iddir}.html`\n\n      // add link\n      newPost.link = link\n\n      newPostList.push(newPost)\n    }\n\n    // write markdown\n    newPostList.forEach((post,index)=>{\n      const id = post.uid\n      const iddir = (id) ? `${id}` : ''\n      const type = post.type\n      if (type) {\n        post.layout = type\n      }\n      const filedir = `${contentsPath}/${type}`\n      const filename = (this.config.fileTypeIndex) ? `${filedir}/${iddir}/index.md` : `${filedir}/${iddir}.md`\n\n      // custom\n      post = postCustomParser(post, index, newPostList)\n\n      const yamlStr = yaml.safeDump(post)\n      const dumpStr = `---\\n${yamlStr}---`\n      let outputdir = filename.split('/')\n      outputdir.length = outputdir.length - 1\n      Util.mkdir(String(outputdir.join('/')))\n      console.log(`${chalk.blue(`Write a markdown file`)}`, filename)\n      fs.writeFileSync(filename, dumpStr)\n    })\n\n\n\n    const allPostJson = { posts: newPostList }\n    const allPostFilePath = path.join(assetPath, this.config.allPostsJsonName)\n    console.log(`${chalk.blue(`Write All json`)}`, allPostFilePath)\n    fs.writeFileSync(allPostFilePath, JSON.stringify(allPostJson))\n  }\n}\n// process.on('unhandledRejection', console.dir);\n\nexport default new PrismicVress()\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"js-yaml\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"js-yaml\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 7\n// module chunks = 0","import Prismic from 'prismic-javascript'\n\nclass Request {\n  constructor() {\n\n\n    this.__init()\n  }\n\n  __init() {\n\n  }\n\n  getAll(endpoint,query = []) {\n    return new Promise((resolve, reject) => {\n      Prismic.api(endpoint).then(function (api) {\n        return api.query(...query); // An empty query will return all the documents\n      }).then(function (response) {\n        // console.log(\"Documents: \", response.results);\n        resolve(response.results)\n      }, function (err) {\n        reject(err)\n        // console.log(\"Something went wrong: \", err);\n      });\n    })\n  }\n}\n\nexport default new Request()\n\n\n\n// WEBPACK FOOTER //\n// ./src/Request.js","import fs from 'fs-extra'\nimport clone from 'clone'\nimport axios from 'axios'\nconst chalk = require('chalk')\n\n\nconst debug = require('debug')('prismic-vress')\n\nfunction makeKeyFromTree(searchTreeList) {\n  return searchTreeList.map((obj, index) => {\n    let treekeyStr = ''\n    obj.place.split('/').forEach((key) => {\n      treekeyStr = treekeyStr + `['${key}']`\n    })\n    return treekeyStr\n  })\n}\n\n\nexport default class Util {\n  static async cleanupDir(dir) {\n    fs.removeSync(dir)\n    const exist = fs.pathExistsSync(dir)\n    if (!exist) {\n      fs.mkdirsSync(dir)\n    }\n  }\n\n  static async mkdir(dir) {\n    const exist = fs.pathExistsSync(dir)\n    if (!exist) {\n      fs.mkdirsSync(dir)\n    }\n  }\n\n  static deepObjectSearch(object, searchKey, valRegExp) {\n    let treeList = []\n\n    objectSearch(object,searchKey,treeList, '')\n    function objectSearch(object, searchKey, treeList, tree) {\n      Object.keys(object).forEach((key, index) => {\n        const value = object[key]\n        const place = String(tree + key)\n        if (typeof (value) === 'object') {\n          if (!value) return\n\n          objectSearch(value, searchKey, treeList, place + '/')\n        } else {\n          if (key === searchKey && value.match(valRegExp)) {\n            treeList.push({\n              place: place,\n              value: value\n            })\n          }\n        }\n      })\n      return treeList\n    }\n\n    return treeList\n  }\n\n  static makeMedialist(post, searchTreeList) {\n    return makeKeyFromTree(searchTreeList)\n    .map((key, index) => {\n      return eval(`post${key}`)\n    })\n  }\n\n  static overrideCopyPost(searchTreeList, object, publishPath) {\n    let copy = clone(object)\n    makeKeyFromTree(searchTreeList)\n    .forEach((key, index) => {\n      const value = eval(`object${key}`)\n      const dirs = value.split('/')\n      const filename = dirs[dirs.length - 1]\n      const newvalue = publishPath + filename\n      eval(`copy${key} = '${newvalue}'`)\n    })\n    return copy\n  }\n\n  static async downloadMedia(url, publishpath) {\n    return new Promise(async (resolve,reject)=>{\n      const dirs = url.split('/')\n      const filename = dirs[dirs.length - 1]\n      const output = `${publishpath}/${filename}`\n      const exitFlag = fs.pathExistsSync(output)\n      if (exitFlag) {\n\n        console.log(`${chalk.cyan(`file is exited, skip download : `)}`, url)\n        resolve()\n      }else {\n        try {\n          console.log(`${chalk.blue(`Downloading...: `)}`, url)\n          const res = await axios.get(url, {\n            responseType: 'arraybuffer'\n          })\n          fs.writeFileSync(output, new Buffer(res.data), 'binary');\n          resolve()\n        } catch (e) {\n          console.log(`${chalk.red(`Error cannot download: `)}`, url)\n          reject(e)\n        }\n      }\n    })\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Util.js","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = 10\n// module chunks = 0","module.exports = require(\"debug\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"debug\"\n// module id = 11\n// module chunks = 0","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 12\n// module chunks = 0","module.exports = {\n  dist: 'docs',\n  assetsDirName: `assets`,\n  contentsDirName: 'contents',\n  mediaDownload: true,\n  publishAssetsPath: '/assets/images/',\n  fileTypeIndex: true,\n  cleandir: false,\n  allPostsJsonName: 'all.json',\n  query: ''\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/default.config.js"],"sourceRoot":""}